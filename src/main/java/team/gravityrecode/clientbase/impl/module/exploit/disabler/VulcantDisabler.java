package team.gravityrecode.clientbase.impl.module.exploit.disabler;

import net.minecraft.network.play.client.C00PacketKeepAlive;
import net.minecraft.network.play.client.C0BPacketEntityAction;
import net.minecraft.network.play.client.C0FPacketConfirmTransaction;
import team.gravityrecode.clientbase.api.client.Event;
import team.gravityrecode.clientbase.api.eventBus.EventHandler;
import team.gravityrecode.clientbase.api.moduleBase.Module;
import team.gravityrecode.clientbase.impl.event.networking.PacketEvent;
import team.gravityrecode.clientbase.impl.property.mode.Mode;
import team.gravityrecode.clientbase.impl.util.network.PacketUtil;

public class VulcantDisabler extends Mode {
    public VulcantDisabler(Module owner, String name) {
        super(owner, name);
    }

    @EventHandler
    public void a(PacketEvent event) {
        if(event.getPacket() instanceof C0BPacketEntityAction)
            event.setCancelled(true);

        if(event.getPacket() instanceof C00PacketKeepAlive || event.getPacket() instanceof C0FPacketConfirmTransaction){
            event.setCancelled(true);
            if(mc.thePlayer.ticksExisted % 120 == 0){
                PacketUtil.sendPacketNoEvent(event.getPacket());
            }
        }
    }
}
